# FitBingo 開発ログ

## プロジェクト概要
- **プロジェクト名**: FitBingo
- **説明**: 筋トレをゲーム化するビンゴアプリケーション
- **開発期間**: 2025年5月30日〜
- **本番URL**: https://fit-bingo-weld.vercel.app/
- **GitHubリポジトリ**: https://github.com/TOMOCHIN4/FitBingo (Private)

## 技術スタック
- **フロントエンド**: React + Vite
- **スタイリング**: Pure CSS (ライブラリ不使用)
- **データ可視化**: Chart.js
- **日付処理**: date-fns
- **バックエンド**: Firebase (Authentication, Firestore)
- **ホスティング**: Vercel
- **バージョン管理**: Git/GitHub

## 開発フェーズ

### フェーズ1: MVP版 (2025/05/30 完了)
#### 実装内容
- 3×3のビンゴカード表示
- 9種類のエクササイズ（ランダム配置）
- レベルシステム（目標値 = 基本値 × (1 + (レベル-1) × 0.5)）
- マスクリックで完了/未完了切り替え
- ビンゴ判定（縦・横・斜め）
- ビンゴ達成時のレベルアップと新カード生成
- LocalStorageによるデータ永続化
- モバイルファーストのレスポンシブデザイン

#### 検収基準達成
- ✅ 9マスのビンゴカードが表示される
- ✅ マスクリックで完了/未完了が切り替わる
- ✅ ビンゴ達成でレベルアップする
- ✅ リロードしてもデータが保持される
- ✅ スマートフォンで問題なく操作できる

### フェーズ2: 記録機能追加 (2025/05/30 完了)
#### 実装内容
- エクササイズ実行モーダル（実行値入力）
- 目標値以上で自動的に達成扱い
- 体重記録機能（日付選択、小数点第一位まで）
- 過去7日分の記録表示
- Chart.jsによる30日間の体重推移グラフ
- ナビゲーションタブ（ビンゴ/体重）
- 体重データのLocalStorage保存

#### 追加パッケージ
- chart.js: ^4.4.9
- react-chartjs-2: ^5.3.0
- date-fns: ^4.1.0

### フェーズ3: グループ機能 (2025/05/30 完了)
#### 実装内容
- Firebase Authentication（メール/パスワード認証）
- Firestore Databaseによるデータ同期
- ユーザー登録/ログイン機能
- ニックネーム設定（20文字以内）
- グループ作成/参加（6桁の招待コード）
- グループ内ランキング（リアルタイム更新）
- ポイントシステム
  - マス完了: 1ポイント × レベル
  - ビンゴ達成: 10ポイント × レベル
- LocalStorageからFirestoreへの自動データ移行

#### Firebase設定
- プロジェクトID: fitbingo-70a5e
- リージョン: asia-northeast1（東京）
- 認証: メール/パスワード
- データベース: Firestore（テストモード）

#### Firestoreデータ構造
```
users/
  userId/
    - email
    - nickname
    - createdAt
    - groups[]

groups/
  groupId/
    - name
    - description
    - inviteCode
    - createdBy
    - members[]

userProgress/
  userId/
    - level
    - points
    - bingoCard
    - completedCells
    - weights[]
    - updatedAt
```

## 管理者機能とバトルシステム (2025/05/30 実装)
### 実装内容
- 管理者権限システム
  - isAdminフラグによる権限管理
  - 管理者用ダッシュボード
  - バトル作成・管理機能
  
- 新ポイントシステム（体重:トレーニング = 6:4）
  - エクササイズ完了: 2ポイント×レベル
  - ライン完成: 20ポイント×レベル（同一カードで複数回獲得可能）
  - 全マスクリア: 50ポイント×レベル
  - 体重減少: 100ポイント/kg
  - 週間目標達成: 50ポイント（-0.5kg/週）
  - 体重維持: 10ポイント（±0.5kg以内）
  
- バトルシステム
  - 期間設定（開始日・終了日）
  - 週間表彰（管理者が実行）
  - リアルタイムランキング
  - 参加者の体重変化追跡
  
- その他の改善
  - 全マスクリア時の自動カード切り替え
  - 同一カードでの複数ライン達成対応

## 今後の開発予定（フェーズ4）
- UI/UXの向上
  - ローディング表示
  - エラーハンドリング
  - トースト通知
  - ビンゴ達成時のアニメーション
- PWA対応
  - manifest.json作成
  - Service Worker実装
  - オフライン時の基本動作
- プロフィール機能
  - アバター画像アップロード
  - 身長/初期体重の設定
  - 体重減少率の自動計算
- 通知機能
  - 毎日の運動リマインダー
  - グループメンバーのビンゴ達成通知

## 重要な注意事項
1. **Firebase設定の保護**
   - 本番環境では環境変数を使用
   - `.env`ファイルはGitにコミットしない
   
2. **セキュリティ**
   - Firestoreルールは現在テストモード
   - 本番環境では適切なセキュリティルールを設定
   - Personal Access Tokenは定期的に更新

3. **パフォーマンス**
   - ビルドサイズが大きい（800KB+）
   - 今後コード分割を検討

## 開発メモ
- WSL環境での開発時は`npm run dev -- --host`でサーバー起動
- Vercelへの自動デプロイ設定済み
- GitHubはプライベートリポジトリ

## 更新履歴
- 2025/05/30: フェーズ1〜3完了、本番環境デプロイ
- 2025/05/30: 管理者機能とバトルシステム実装